P5_weekends <- P5 %>% dplyr::filter(weekdays_binary == 0)
#function for counting the number of pictures for each species
activity <- function(species, CT)
{
CT_species <- CT %>% filter(Species == species)
Unique_CT <- unique(CT_species$Station)
l <- list(0)
for(i in Unique_CT)
{
l[[which(Unique_CT == i)]] <-
nrow(CT_species %>% filter(Station == i))
#% of pictures taken during the night
names(l)[which(Unique_CT == i)] <- as.character(i)
}
x <- data.frame(unlist(l))
x <- dplyr::rename(x, activity = unlist.l.)
x <- x %>% mutate(User_uid = as.numeric(rownames(x)))
x_covenv <- dplyr::inner_join(x = x,
y = stacked_raster_values_and_garden_CT_all_seasons_no_nas,
by = c("User_uid" = "Station"))
#merging with the covenv
return(x_covenv)
}
## P1
squirrel_P1_activity_weekdays <- activity("Squirrel", P1_weekdays) %>%
mutate(species = "Squirrel", weekdays = 1)
squirrel_P1_activity_weekends <- activity("Squirrel", P1_weekends) %>%
mutate(species = "Squirrel", weekdays = 0)
cat_P1_activity_weekdays <- activity("Cat", P1_weekdays) %>%
mutate(species = "Cat", weekdays = 1)
cat_P1_activity_weekends <- activity("Cat", P1_weekends) %>%
mutate(species = "Cat", weekdays = 0)
fox_P1_activity_weekdays <- activity("Red Fox", P1_weekdays) %>%
mutate(species = "Red Fox", weekdays = 1)
fox_P1_activity_weekends <- activity("Red Fox", P1_weekends) %>%
mutate(species = "Red Fox", weekdays = 0)
marten_P1_activity_weekdays <- activity("Marten", P1_weekdays) %>%
mutate(species = "Marten", weekdays = 1)
marten_P1_activity_weekends <- activity("Marten", P1_weekends) %>%
mutate(species = "Marten", weekdays = 0)
raccoon_P1_activity_weekdays <- activity("Raccoon", P1_weekdays) %>%
mutate(species = "Raccoon", weekdays = 1)
raccoon_P1_activity_weekends <- activity("Raccoon", P1_weekends) %>%
mutate(species = "Raccoon", weekdays = 0)
## P2
squirrel_P2_activity_weekdays <- activity("Squirrel", P2_weekdays) %>%
mutate(species = "Squirrel", weekdays = 1)
squirrel_P2_activity_weekends <- activity("Squirrel", P2_weekends) %>%
mutate(species = "Squirrel", weekdays = 0)
cat_P2_activity_weekdays <- activity("Cat", P2_weekdays) %>%
mutate(species = "Cat", weekdays = 1)
cat_P2_activity_weekends <- activity("Cat", P2_weekends) %>%
mutate(species = "Cat", weekdays = 0)
fox_P2_activity_weekdays <- activity("Red Fox", P2_weekdays) %>%
mutate(species = "Red Fox", weekdays = 1)
fox_P2_activity_weekends <- activity("Red Fox", P2_weekends) %>%
mutate(species = "Red Fox", weekdays = 0)
marten_P2_activity_weekdays <- activity("Marten", P2_weekdays) %>%
mutate(species = "Marten", weekdays = 1)
marten_P2_activity_weekends <- activity("Marten", P2_weekends) %>%
mutate(species = "Marten", weekdays = 0)
raccoon_P2_activity_weekdays <- activity("Raccoon", P2_weekdays) %>%
mutate(species = "Raccoon", weekdays = 1)
raccoon_P2_activity_weekends <- activity("Raccoon", P2_weekends) %>%
mutate(species = "Raccoon", weekdays = 0)
## P3
squirrel_P3_activity_weekdays <- activity("Squirrel", P3_weekdays) %>%
mutate(species = "Squirrel", weekdays = 1)
squirrel_P3_activity_weekends <- activity("Squirrel", P3_weekends) %>%
mutate(species = "Squirrel", weekdays = 0)
cat_P3_activity_weekdays <- activity("Cat", P3_weekdays) %>%
mutate(species = "Cat", weekdays = 1)
cat_P3_activity_weekends <- activity("Cat", P3_weekends) %>%
mutate(species = "Cat", weekdays = 0)
fox_P3_activity_weekdays <- activity("Red Fox", P3_weekdays) %>%
mutate(species = "Red Fox", weekdays = 1)
fox_P3_activity_weekends <- activity("Red Fox", P3_weekends) %>%
mutate(species = "Red Fox", weekdays = 0)
marten_P3_activity_weekdays <- activity("Marten", P3_weekdays) %>%
mutate(species = "Marten", weekdays = 1)
marten_P3_activity_weekends <- activity("Marten", P3_weekends) %>%
mutate(species = "Marten", weekdays = 0)
raccoon_P3_activity_weekdays <- activity("Raccoon", P3_weekdays) %>%
mutate(species = "Raccoon", weekdays = 1)
raccoon_P3_activity_weekends <- activity("Raccoon", P3_weekends) %>%
mutate(species = "Raccoon", weekdays = 0)
#P4
squirrel_P4_activity_weekdays <- activity("Squirrel", P4_weekdays) %>%
mutate(species = "Squirrel", weekdays = 1)
squirrel_P4_activity_weekends <- activity("Squirrel", P4_weekends) %>%
mutate(species = "Squirrel", weekdays = 0)
cat_P4_activity_weekdays <- activity("Cat", P4_weekdays) %>%
mutate(species = "Cat", weekdays = 1)
cat_P4_activity_weekends <- activity("Cat", P4_weekends) %>%
mutate(species = "Cat", weekdays = 0)
fox_P4_activity_weekdays <- activity("Red Fox", P4_weekdays) %>%
mutate(species = "Red Fox", weekdays = 1)
fox_P4_activity_weekends <- activity("Red Fox", P4_weekends) %>%
mutate(species = "Red Fox", weekdays = 0)
marten_P4_activity_weekdays <- activity("Marten", P4_weekdays) %>%
mutate(species = "Marten", weekdays = 1)
marten_P4_activity_weekends <- activity("Marten", P4_weekends) %>%
mutate(species = "Marten", weekdays = 0)
raccoon_P4_activity_weekdays <- activity("Raccoon", P4_weekdays) %>%
mutate(species = "Raccoon", weekdays = 1)
raccoon_P4_activity_weekends <- activity("Raccoon", P4_weekends) %>%
mutate(species = "Raccoon", weekdays = 0)
#P5
squirrel_P5_activity_weekdays <- activity("Squirrel", P5_weekdays) %>%
mutate(species = "Squirrel", weekdays = 1)
squirrel_P5_activity_weekends <- activity("Squirrel", P5_weekends) %>%
mutate(species = "Squirrel", weekdays = 0)
cat_P5_activity_weekdays <- activity("Cat", P5_weekdays) %>%
mutate(species = "Cat", weekdays = 1)
cat_P5_activity_weekends <- activity("Cat", P5_weekends) %>%
mutate(species = "Cat", weekdays = 0)
fox_P5_activity_weekdays <- activity("Red Fox", P5_weekdays) %>%
mutate(species = "Red Fox", weekdays = 1)
fox_P5_activity_weekends <- activity("Red Fox", P5_weekends) %>%
mutate(species = "Red Fox", weekdays = 0)
marten_P5_activity_weekdays <- activity("Marten", P5_weekdays) %>%
mutate(species = "Marten", weekdays = 1)
marten_P5_activity_weekends <- activity("Marten", P5_weekends) %>%
mutate(species = "Marten", weekdays = 0)
raccoon_P5_activity_weekdays <- activity("Raccoon", P5_weekdays) %>%
mutate(species = "Raccoon", weekdays = 1)
raccoon_P5_activity_weekends <- activity("Raccoon", P5_weekends) %>%
mutate(species = "Raccoon", weekdays = 0)
# Combine all data sets
Activity_squirrel_pred_Berlin_all_seasons <-
rbind(# P1
squirrel_P1_activity_weekdays, squirrel_P1_activity_weekends,
cat_P1_activity_weekdays,cat_P1_activity_weekends,
fox_P1_activity_weekdays,fox_P1_activity_weekends,
marten_P1_activity_weekdays,marten_P1_activity_weekends,
raccoon_P1_activity_weekdays,raccoon_P1_activity_weekends,
# P2
squirrel_P2_activity_weekdays, squirrel_P2_activity_weekends,
cat_P2_activity_weekdays, cat_P2_activity_weekends,
fox_P2_activity_weekdays, fox_P2_activity_weekends,
marten_P2_activity_weekdays, marten_P2_activity_weekends,
raccoon_P2_activity_weekdays, raccoon_P2_activity_weekends,
# P3
squirrel_P3_activity_weekdays, squirrel_P3_activity_weekends,
cat_P3_activity_weekdays, cat_P3_activity_weekends,
fox_P3_activity_weekdays, fox_P3_activity_weekends,
marten_P3_activity_weekdays, marten_P3_activity_weekends,
raccoon_P3_activity_weekdays, raccoon_P3_activity_weekends,
# P4
squirrel_P4_activity_weekdays, squirrel_P4_activity_weekends,
cat_P4_activity_weekdays, cat_P4_activity_weekends,
fox_P4_activity_weekdays, fox_P4_activity_weekends,
marten_P4_activity_weekdays, marten_P4_activity_weekends,
raccoon_P4_activity_weekdays, raccoon_P4_activity_weekends,
# P5
squirrel_P5_activity_weekdays, squirrel_P5_activity_weekends,
cat_P5_activity_weekdays, cat_P5_activity_weekends,
fox_P5_activity_weekdays, fox_P5_activity_weekends,
marten_P5_activity_weekdays, marten_P5_activity_weekends,
raccoon_P5_activity_weekdays, raccoon_P5_activity_weekends)
length(unique(Activity_squirrel_pred_Berlin_all_seasons$User_uid))
#
table(Activity_squirrel_pred_Berlin_all_seasons$species)
#
Activity_squirrel_pred_Berlin_all_seasons %>%
group_by(species) %>%
dplyr::summarise(n_pics = sum(activity))
#
table(Activity_squirrel_pred_Berlin_all_seasons$species, Activity_squirrel_pred_Berlin_all_seasons$project_phase)
ggplot(data = Activity_squirrel_pred_Berlin_all_seasons, mapping = aes(x = species)) +
geom_bar() +
facet_grid(weekdays ~ .)
# 0 = weekend, 1 = week
ggplot(data = Activity_squirrel_pred_Berlin_all_seasons, mapping = aes(x = species)) +
geom_bar() +
facet_grid(garden_type ~ .)
ggplot(data = Activity_squirrel_pred_Berlin_all_seasons, mapping = aes(x = species)) +
geom_bar() +
facet_grid(compost ~ .)
ggplot(data = Activity_squirrel_pred_Berlin_all_seasons,
mapping = aes(x = species, y = Local_tree_cover)) +
geom_boxplot()
ggplot(data = Activity_squirrel_pred_Berlin_all_seasons,
mapping = aes(x = species, y = pop_100)) +
geom_boxplot()
ggplot(data = Activity_squirrel_pred_Berlin_all_seasons,
mapping = aes(x = species, y = imperv_100)) +
geom_boxplot()
squirrels_CT <- CT_act_date_formated[CT_act_date_formated$Species == "Squirrel",]
# add a column for the hour of the day
squirrels_CT$hour <- hour(squirrels_CT$Time)
CT_act_date_formated
saveRDS(object = CT_act_date_formated,
file = here::here("output", "data-proc", "all_seasons",
"CT_act_date_proc_20221117.RDS"))
# stacked_raster_values_and_garden_CT_all_seasons_no_nas
saveRDS(object = stacked_raster_values_and_garden_CT_all_seasons_no_nas,
file = here::here("output", "data-proc", "all_seasons",
"stacked_raster_values_and_garden_CT_all_seasons_no_nas_proc_20221117.RDS"))
# Activity_squirrel_pred_Berlin_all_seasons
saveRDS(object = Activity_squirrel_pred_Berlin_all_seasons,
file = here::here("output", "data-proc", "all_seasons",
"Activity_squirrel_pred_Berlin_all_seasons_20221117.RDS"))
# squirrels_CT
saveRDS(object = squirrels_CT,
file = here::here("output", "data-proc", "all_seasons",
"squirrels_CT_20221117.RDS"))
#
#
# # Diurnality
# # saveRDS(object = diurnality_predprey_Berlin_all_seasons,
# #         file = here::here("output", "data-proc", "all_seasons",
# #                           "diurnality_predprey_Berlin_all_seasons_20220802.RDS"))
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE,
dev = "ragg_png", fig.width = 9, fig.height = 6, dpi = 600, retina = 1)
Sys.setlocale("LC_TIME", "C")
##Camera Traps detection histories
#loading the environmental variables and using only the user IDs that are within the cov table
garden_variables <- readRDS(here::here("output", "data-proc", "all_seasons",
"stacked_raster_values_and_garden_CT_all_seasons_no_nas_proc_20221117.RDS"))
#already formatted and filtered data
CT_act_date_proc <- readRDS(here::here("output", "data-proc", "all_seasons",
"CT_act_date_proc_20221117.RDS"))
View(garden_variables)
devtools::install_github("EcoDynIZW/d6")
library(d6)
library(d6)
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE,
dev = "ragg_png", fig.width = 9, fig.height = 6, dpi = 600, retina = 1)
Sys.setlocale("LC_TIME", "C")
## for non-CRAN packages please keep install instruction
## but commented so it is not run each time, e.g.
# devtools::install_github("EcoDynIZW/template")
## libraries used in this script
## please add ALL LIBRARIES NEEDED HERE
## please remove libraries from the list that are not needed anymore
## at a later stage
package.list=c(#"camtrapR",
#"dplyr",
#"evaluate",
"ggplot2",
"gdata",
"ggpubr",
"here",
#"janitor",
#"lubridate",
"maptools",
#"ochRe",
# "optimbase", maybe needed but has to be installed from the CRAN archive https://cran.r-project.org/web/packages/optimbase/index.html
#"plyr",
"raster",
#"readxl",
#"rgdal",
#"rgeos",
#"rjags",
# "rlecuyer",
#"sf",
"showtext",
"skimr",
#"snowfall",
#"sp",
#"stringr",
"tidyverse",
#"vroom"
)
## for non-CRAN packages please keep install instruction
## but commented so it is not run each time, e.g.
# devtools::install_github("EcoDynIZW/template")
## libraries used in this script
## please add ALL LIBRARIES NEEDED HERE
## please remove libraries from the list that are not needed anymore
## at a later stage
package.list=c(#"camtrapR",
#"dplyr",
#"evaluate",
"ggplot2",
"gdata",
"ggpubr",
"here",
#"janitor",
#"lubridate",
"maptools",
#"ochRe",
# "optimbase", maybe needed but has to be installed from the CRAN archive https://cran.r-project.org/web/packages/optimbase/index.html
#"plyr",
"raster",
#"readxl",
#"rgdal",
#"rgeos",
#"rjags",
# "rlecuyer",
#"sf",
"showtext",
"skimr",
#"snowfall",
#"sp",
#"stringr",
"tidyverse"
#"vroom"
)
for (package in package.list) {
if (!require(package, character.only=T, quietly=T)) {
install.packages(package)
library(package, character.only=T)
}
}
rm(package.list)
rm(package)
##Camera Traps detection histories
#loading the environmental variables and using only the user IDs that are within the cov table
garden_variables <- readRDS(here::here("output", "data-proc", "all_seasons",
"stacked_raster_values_and_garden_CT_all_seasons_no_nas_proc_20221117.RDS"))
#already formatted and filtered data
CT_act_date_proc <- readRDS(here::here("output", "data-proc", "all_seasons",
"CT_act_date_proc_20221117.RDS"))
View(garden_variables)
View(CT_act_date_proc)
CT_species_interest <- CT_act_date_proc %>%
filter(Species == "Squirrel" |
Species == "Cat" |
Species == "Marten" |
Species == "Raccoon" |
Species == "Red Fox")
CT_per_station <- CT_species_interest %>%
dplyr::count(Species, Station) %>%
group_by(Species) %>%
dplyr::summarize(n_overall = sum(n),
mean_day = mean(n),
median_day = median(n),
min_day = min(n),
max_day = max(n))
CT_per_species
CT_per_station
View(CT_per_station)
View(CT_species_interest)
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE,
dev = "ragg_png", fig.width = 9, fig.height = 6, dpi = 600, retina = 1)
Sys.setlocale("LC_TIME", "C")
## for non-CRAN packages please keep install instruction
## but commented so it is not run each time, e.g.
# devtools::install_github("EcoDynIZW/template")
## libraries used in this script
## please add ALL LIBRARIES NEEDED HERE
## please remove libraries from the list that are not needed anymore
## at a later stage
package.list=c(#"camtrapR",
#"dplyr",
#"evaluate",
"ggplot2",
"gdata",
"ggpubr",
"here",
#"janitor",
#"lubridate",
"maptools",
#"ochRe",
# "optimbase", maybe needed but has to be installed from the CRAN archive https://cran.r-project.org/web/packages/optimbase/index.html
#"plyr",
"raster",
#"readxl",
#"rgdal",
#"rgeos",
#"rjags",
# "rlecuyer",
#"sf",
"showtext",
"skimr",
#"snowfall",
#"sp",
#"stringr",
"tidyverse"
#"vroom"
)
for (package in package.list) {
if (!require(package, character.only=T, quietly=T)) {
install.packages(package)
library(package, character.only=T)
}
}
rm(package.list)
rm(package)
##Camera Traps detection histories
#loading the environmental variables and using only the user IDs that are within the cov table
garden_variables <- readRDS(here::here("output", "data-proc", "all_seasons",
"stacked_raster_values_and_garden_CT_all_seasons_no_nas_proc_20221117.RDS"))
#already formatted and filtered data
CT_act_date_proc <- readRDS(here::here("output", "data-proc", "all_seasons",
"CT_act_date_proc_20221117.RDS"))
CT_species_interest <- CT_act_date_proc %>%
filter(Species == "Squirrel" |
Species == "Cat" |
Species == "Marten" |
Species == "Raccoon" |
Species == "Red Fox")
CT_per_station <- CT_species_interest %>%
dplyr::count(Species, Station) %>%
group_by(Species) %>%
dplyr::summarize(n_overall = sum(n),
mean_day = mean(n),
median_day = median(n),
min_day = min(n),
max_day = max(n))
CT_per_station
View(CT_per_station)
CT_per_station <- CT_species_interest %>%
dplyr::count(Species, Station) #%>%
View(CT_per_station)
table(CT_species_interest$Species, CT_species_interest$Station)
sum(CT_per_station$n)
# Filter for species of interest
CT_species_interest <- CT_act_date_proc %>%
filter(Species == "Squirrel" |
Species == "Cat" |
Species == "Marten" |
Species == "Raccoon" |
Species == "Red Fox")
# Count the number of pictures per species per station
CT_per_station <- CT_species_interest %>%
dplyr::count(Species, Station)
# Overview
head(CT_per_station)
sum(CT_per_station$n) # 55718 = same as number of rows in CT_species_interest
?join
?join
band_members %>% inner_join(band_instruments)
band_members %>% left_join(band_instruments)
band_members %>% right_join(band_instruments)
band_members %>% full_join(band_instruments)
?join
band_members
band_instruments
band_members %>% inner_join(band_instruments)
band_members %>% left_join(band_instruments)
band_members %>% right_join(band_instruments)
band_members %>% full_join(band_instruments)
View(garden_variables)
CT_per_station %>%
left_join(y = garden_variables, by = "Station")
CT_per_station <- CT_per_station %>%
left_join(y = garden_variables, by = "Station")
View(CT_per_station)
View(CT_per_station)
ggplot(data = CT_per_station, mapping = aes(x = fence_height, y = n)) +
geom_point()
View(CT_act_date_proc)
ggplot(data = CT_per_station, mapping = aes(x = fence_height, y = n)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = fence_height)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = fence_height, y = n)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = fence_height)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = pop_100, y = n)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = pop_100)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = fence_height, y = n)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = fence_height)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = garden_type, y = n)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = garden_type)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = pop_100, y = n)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = pop_100)) +
geom_point()
table(CT_per_station$garden_type)
View(garden_variables)
names(CT_per_station)
ggplot(data = CT_per_station, mapping = aes(x = n, y = project_phase)) +
geom_point() +
labs(title = "Number of pictures per project phase")
ggplot(data = CT_per_station, mapping = aes(x = n, y = fence_height)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = garden_type)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = garden_size)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = compost)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = project_phase)) +
geom_point() +
labs(title = "Number of pictures per station per project phase")
ggplot(data = CT_per_station, mapping = aes(x = n, y = fence_height)) +
geom_point()+
labs(title = "Number of pictures per station per fence height")
ggplot(data = CT_per_station, mapping = aes(x = n, y = garden_type)) +
geom_point()+
labs(title = "Number of pictures per station per garden type")
ggplot(data = CT_per_station, mapping = aes(x = n, y = garden_size)) +
geom_point()+
labs(title = "Number of pictures per station per garden size")
ggplot(data = CT_per_station, mapping = aes(x = n, y = compost)) +
geom_point()+
labs(title = "Number of pictures per station per compost")
ggplot(data = CT_per_station, mapping = aes(x = n, y = pop_100)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = dist_water_100)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = imperv_100)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = noise_100)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = Local_tree_cover)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = tree_cover_100)) +
geom_point()
ggplot(data = CT_per_station, mapping = aes(x = n, y = distance_border)) +
geom_point()
